<div class="container py-5">
  <div class="login-wrap">
    <h1 class="my-4">Login</h1>

    <form id="loginForm">
      <div class="input-group mb-3">
        <span class="input-group-text" id="basic-addon1">*</span>
        <input
          type="text"
          id="username"
          class="form-control"
          placeholder="Username"
          aria-label="Username"
          aria-describedby="basic-addon1"
        />
      </div>

      <div class="input-group mb-3">
        <span class="input-group-text" id="basic-addon2">*</span>
        <input
          type="password"
          id="password"
          class="form-control"
          placeholder="Password"
          aria-label="Password"
          aria-describedby="basic-addon1"
        />
      </div>

      <button type="submit" class="btn btn-success">Login</button>
    </form>
  </div>
</div>

<style>
  .login-wrap {
    max-width: 480px;
    margin: auto;
  }
</style>

<script>
  const loginForm = document.getElementById('loginForm')
  loginForm.addEventListener('submit', async event => {
    event.preventDefault()

    const username = document.getElementById('username').value
    const password = document.getElementById('password').value

    try {
      const response = await fetch('/auth', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ username, password }),
      })

      if (response.ok) {
        window.location.href = '/'
      } else {
        console.error('Login failed')
      }
    } catch (error) {
      console.error('An error occurred', error)
    }
  })
</script>
